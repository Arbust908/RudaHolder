<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="stylesheet" href="css/main.css">
  <title>RUDO</title>
</head>
<body>
  <main>
<!-- No vamos a usar id para dar estilos. Sino class -->

  <img src='assets/rudo_placeholder.jpg' alt="" class="bg">
  <img src="assets/svgs/Ra_Logo_Rudo.svg" alt="" class="logo">
  <div class="links">
    <!-- Acomodo los alt y class asi quedan en fila... becuase OCD -->
    <!-- Vamos a usar svgs por que cargan mas rapido por ser vectores -->
    <a href="" class="social-btn" ><img src="assets/svgs/Ra_Instagram.svg" alt="logo de red social" class="snl"><h2 class="ig">IG</h2></a>
    <a href="" class="social-btn" ><img src="assets/svgs/Ra_Facebook.svg"  alt="logo de red social" class="snl"><h2 class="fb">FB</h2></a>
    <a href="" class="social-btn" ><img src="assets/svgs/Ra_Vimeo.svg"     alt="logo de red social" class="snl"><h2 class="vimeo">Vimeo</h2></a>
    <a href="" class="social-btn" ><img src="assets/svgs/Ra_Behance.svg"   alt="logo de red social" class="snl"><h2 class="behance">Behance</h2></a>
  </div>
  <h2 class="coming">New web coming</h2>
  <h2 class="check">Check it</h2>
  <video></video>
  </main>
</body>
<script defer>
  Object.defineProperty(HTMLMediaElement.prototype, 'playing', {
    get: function(){
      return !!(this.currentTime > 0 && !this.paused && !this.ended && this.readyState > 2);
    }
  })
  const main = document.querySelector('main');
  let video = document.querySelector('video');
  let imagen = document.querySelector('img.bg');
  console.log('Creado');
  video.setAttribute('loop',true);
  video.setAttribute('mute',true);
  video.classList.add('bg');
  main.appendChild(video);
  console.log('Metido!');
  var req = new XMLHttpRequest();
  req.open('GET', '/assets/RUDO_EDIT_20_seg.mp4', true);
  req.responseType = 'blob';

  req.onload = function() {
    // Onload is triggered even on 404
    // so we need to check the status code
    if (this.status === 200) {
      var videoBlob = this.response;
      var vid = URL.createObjectURL(videoBlob); // IE10+
      // Video is now downloaded
      // and we can set it as source on the video element
      video.src = vid;
      video.setAttribute('autoplay',true);
      console.log('Sorce!!!');
    }
  }
  req.onerror = function() {
    console.log('EROR');
  }

  req.send();
  imagen.style = 'transition:.3s;opacity:0.8;background-color:red;';
  video.onplay = function() {
    console.log('Play!');
    imagen.style = 'transition:.3s;opacity:0';
  }
  console.log(video.buffered);
  video.addEventListener('canplaythrough', () => {
    console.log('can play throug');
    video.play();
    
  })
  
  setTimeout(() => {
    if (video.src && video.paused) {
      console.log('Fuerza!');
      
      video.play()
    }
  }, 6000);
  // window.onload = () => {
  //   video.play();
  // }
</script>
</html>
